extends base

block content
  main
    h2.page__subject invoice details
    - const paymentCount = Number(invoice.payment.length)
    if paymentCount > 0
      .table-wrapper
        .heading__title Payment Info
        table.table-data
          tr
            th payment tag
            th Description
            th Amount
            th Date 
          each payment in invoice.payment
            tr
              td= payment.paymentTag
              td= payment.paymentDetails
              td= payment.paymentAmount.toLocaleString(en-us, { style: 'currency', currency: 'USD' })
              td= payment.paymentDate.toLocaleString(en-us, {dateStyle: 'medium'})
    else
      p.empty__record no payment record exist on this invoice!

    // Horizontal Line
    .line &nbsp;
    // User Resources Data Display
    .resource-details
      .heading__title.ma-bt-lg Invoice Info
      form
        .form__div
          div(class='box-text-cell')
            p.box-title invoice no
            input#invno(type='text', value=`${invoice.invoiceNumber}`)
          div(class='box-text-cell')
            p.box-title description
            textarea#desc(rows='3' cols='48')= invoice.invoiceDescription
          div(class='box-text-cell')
            p.box-title sales amount
            input#salesval(type='number',step='any',value=`${invoice.invoiceAppliedToSalesValue}`)
          div(class='box-text-cell')
            p.box-title cost amount
            input#costval(type='number',step='any',value=`${invoice.spentOnProject}`)
          div(class='box-text-cell')
            p.box-title job id
            //- select#job(name='jobs', class='jobs')
            //-   option(value= `${invoice.job ? invoice.job.id : ''}`)= `${invoice.job ? invoice.job.jobID + ' - ' + invoice.job.jobDescription: ''}`
            input#job(list='joblist',name='jobs',value=`${invoice.job ? invoice.job.id : ''}`)
            datalist#joblist
              option(value= 'job1')
              option(value= 'job2')
              option(value= 'job3')
          div(class='box-text-cell')
            p.box-title class
            select#invclass(name='class')
              option= invoice.invoiceClass
              option= `${invoice.invoiceClass === 'Installation' ? 'Maintenance' : 'Installation'}`
          div(class='box-text-cell')
            p.box-title wht %
            input#whtpercent(type='number',value=`${invoice.witholdingTaxPercent}`)
          div(class='box-text-cell')
            p.box-title wht amount
            input#whtamt(type='number',step='any',value=`${invoice.witholdingTaxAmount}`)
          div(class='box-text-cell')
            p.box-title profit/loss
            input#profit-loss(type='number',step='any',value=`${invoice.profitOrLoss}`)
          div(class='box-text-cell')
            p.box-title partners payment
            input#partners-pyt(type='number',step='any',value=`${invoice.invoicePartnerPayment}`)
          div(class='box-text-cell')
            input#docid(type='hidden',value=`${invoice.id}`)
        .form__cta
          button.btn--cta Save settings
    .line &nbsp;

